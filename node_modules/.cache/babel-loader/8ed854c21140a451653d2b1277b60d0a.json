{"ast":null,"code":"import _classCallCheck from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/yassine/Desktop/Gendoc-front/src/components/forms/Facture.js\";\nimport React, { Component } from \"react\";\nimport Produit from './facture/Produit';\nimport axios from 'axios';\nimport Client from './facture/Client';\nimport Societe from './facture/Societe';\nimport { downloadFilesURL as downloadURL, gendocServiceURL as apiURL, styles } from '../../constants/defaultValues';\nimport { handleAdd, handleRemove } from '../../commun';\nimport { Row, Col, FormInput, Button, FormSelect, Form } from \"shards-react\";\n\nvar Facture =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Facture, _Component);\n\n  function Facture(props) {\n    var _this;\n\n    _classCallCheck(this, Facture);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Facture).call(this, props));\n    _this.state = {\n      toggleDownloadBtn: false,\n      produit: [{\n        value: 0\n      }],\n      formData: {\n        signed: true,\n        typeName: \"FACTURE\",\n        data: {\n          \"ref\": \"\",\n          \"societe\": \"Novelis\",\n          \"adresse\": \"\",\n          \"tel\": \"\",\n          \"fixe\": \"\",\n          \"email\": \"\",\n          \"nomC\": \"\",\n          \"societeC\": \"\",\n          \"adresseC\": \"\",\n          \"telC\": \"\",\n          \"dateCreation\": \"\",\n          \"description\": \"\",\n          produits: []\n        }\n      }\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Facture, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n\n      if (e.target.id === 'form') {\n        var produits = [];\n        this.state.produit.map(function (item, i) {\n          var produit = {\n            \"name\": e.target['nomProduit' + i].value,\n            \"quantite\": e.target['qteProduit' + i].value,\n            \"prix\": e.target['prixProduit' + i].value + ' ' + e.target['devise' + i].value,\n            \"total\": e.target['prixProduit' + i].value * e.target['qteProduit' + i].value + ' ' + e.target['devise' + i].value\n          };\n          produits.push(produit);\n        });\n        this.setState({\n          formData: {\n            signed: e.target.signature.value,\n            type: \"FACTURE\",\n            data: {\n              \"ref\": e.target.numFacture.value,\n              \"nomS\": e.target.nomSociete.value,\n              \"adresseS\": e.target.adresseSociete.value,\n              \"telS\": e.target.telSociete.value,\n              \"fixeS\": '',\n              \"mailS\": e.target.emailSociete.value,\n              \"siteS\": e.target.sitewebSociete.value,\n              \"nomC\": e.target.nomClient.value,\n              \"adresseC\": e.target.adresseClient.value,\n              \"telC\": e.target.telClient.value,\n              \"mailC\": e.target.emailClient.value,\n              \"dateFacturation\": e.target.dateFacturation.value,\n              \"datePaiement\": e.target.datePaiement.value,\n              \"description\": e.target.description.value,\n              produits: produits\n            }\n          }\n        }, function () {\n          axios.post(apiURL, {\n            responseType: 'arraybuffer',\n            headers: {\n              'Accept': 'application/pdf'\n            }\n          }, {\n            params: {\n              data: _this2.state.formData\n            }\n          }).then(function (response) {\n            if (response.status === 200) {\n              _this2.setState({\n                toggleDownloadBtn: true,\n                generatedFileName: response.data\n              });\n            }\n          });\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(Form, {\n        id: \"form\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Societe, {\n        styles: styles,\n        title: \"Societ\\xE9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Client, {\n        title: \"Client\",\n        styles: styles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(Row, {\n        style: styles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Produit\"))), this.state.produit.map(function (field, idx) {\n        return React.createElement(\"div\", {\n          key: \"\".concat(field, \"-\").concat(idx),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(Produit, {\n          styles: styles,\n          title: \"Produit\",\n          idx: idx,\n          add: handleAdd.bind(_this3, 'produit'),\n          delete: handleRemove.bind(_this3, idx, 'produit'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }));\n      }), React.createElement(\"fieldset\", {\n        className: \"my-fieldset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Col, {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Intitul\\xE9 de la facture\"), React.createElement(FormInput, {\n        type: \"text\",\n        name: \"description\",\n        placeholder: \"Description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"5\",\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Date de facturation\"), React.createElement(FormInput, {\n        name: \"dateFacturation\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: \"5\",\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Date de Paiement\"), React.createElement(FormInput, {\n        name: \"datePaiement\",\n        type: \"date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: \"2\",\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"feSignature\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Signature\"), React.createElement(FormSelect, {\n        name: \"signature\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Oui\"), React.createElement(\"option\", {\n        value: \"false\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Non\"))))), React.createElement(\"fieldset\", {\n        className: \"my-fieldset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Button, {\n        outline: true,\n        theme: \"primary\",\n        className: \"mb-2 mr-1\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"G\\xE9n\\xE9rer le document\"), React.createElement(Button, {\n        outline: true,\n        theme: \"secondary\",\n        className: \"mb-2 mr-1\",\n        type: \"reset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Vider les champs\"), this.state.toggleDownloadBtn ? React.createElement(\"a\", {\n        href: downloadURL + this.state.generatedFileName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \" \", React.createElement(\"button\", {\n        title: \"T\\xE9l\\xE9charger le fichier PDF g\\xE9n\\xE9r\\xE9\",\n        type: \"button\",\n        className: \"mb-2 mr-1 btn btn-outline-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-download\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }))) : \"\"));\n    }\n  }]);\n\n  return Facture;\n}(Component);\n\nexport default Facture;","map":{"version":3,"sources":["/home/yassine/Desktop/Gendoc-front/src/components/forms/Facture.js"],"names":["React","Component","Produit","axios","Client","Societe","downloadFilesURL","downloadURL","gendocServiceURL","apiURL","styles","handleAdd","handleRemove","Row","Col","FormInput","Button","FormSelect","Form","Facture","props","state","toggleDownloadBtn","produit","value","formData","signed","typeName","data","produits","handleSubmit","bind","e","preventDefault","target","id","map","item","i","push","setState","signature","type","numFacture","nomSociete","adresseSociete","telSociete","emailSociete","sitewebSociete","nomClient","adresseClient","telClient","emailClient","dateFacturation","datePaiement","description","post","responseType","headers","params","then","response","status","generatedFileName","field","idx"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Produit from './facture/Produit'\nimport axios from 'axios'\nimport Client from './facture/Client'\nimport Societe from './facture/Societe'\nimport { downloadFilesURL as downloadURL, gendocServiceURL as apiURL, styles } from '../../constants/defaultValues'\nimport { handleAdd, handleRemove } from '../../commun'\n\n\nimport {\n    Row,\n    Col,\n    FormInput,\n    Button,\n    FormSelect,\n    Form\n} from \"shards-react\";\n\nclass Facture extends Component {\n\n    state = {\n        toggleDownloadBtn: false,\n\n        produit: [{ value: 0 }],\n        formData: {\n            signed: true,\n            typeName: \"FACTURE\",\n            data: {\n                \"ref\": \"\",\n                \"societe\": \"Novelis\",\n                \"adresse\": \"\",\n                \"tel\": \"\",\n                \"fixe\": \"\",\n                \"email\": \"\",\n                \"nomC\": \"\",\n                \"societeC\": \"\",\n                \"adresseC\": \"\",\n                \"telC\": \"\",\n                \"dateCreation\": \"\",\n                \"description\": \"\",\n                produits: []\n            }\n        }\n    }\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    handleSubmit(e) {\n        e.preventDefault();\n        if (e.target.id === 'form') {\n            let produits = []\n\n            this.state.produit.map((item, i) => {\n\n                const produit =\n                {\n                    \"name\": e.target['nomProduit' + i].value,\n                    \"quantite\": e.target['qteProduit' + i].value,\n                    \"prix\": e.target['prixProduit' + i].value + ' ' + e.target['devise' + i].value,\n                    \"total\": e.target['prixProduit' + i].value * e.target['qteProduit' + i].value + ' ' + e.target['devise' + i].value\n                }\n                produits.push(produit)\n\n\n            })\n\n            this.setState({\n                formData: {\n                    signed: e.target.signature.value,\n                    type: \"FACTURE\",\n                    data: {\n                        \"ref\": e.target.numFacture.value,\n                        \"nomS\": e.target.nomSociete.value,\n                        \"adresseS\": e.target.adresseSociete.value,\n                        \"telS\": e.target.telSociete.value,\n                        \"fixeS\": '',\n                        \"mailS\": e.target.emailSociete.value,\n                        \"siteS\": e.target.sitewebSociete.value,\n                        \"nomC\": e.target.nomClient.value,\n                        \"adresseC\": e.target.adresseClient.value,\n                        \"telC\": e.target.telClient.value,\n                        \"mailC\": e.target.emailClient.value,\n                        \"dateFacturation\": e.target.dateFacturation.value,\n                        \"datePaiement\": e.target.datePaiement.value,\n                        \"description\": e.target.description.value,\n                        produits: produits\n                    }\n                }\n            }, () => {\n                axios.post(apiURL, {\n                    responseType: 'arraybuffer',\n                    headers: {\n                        'Accept': 'application/pdf'\n                    }\n                }, { params: { data: this.state.formData } }).then((response) => {\n                    if (response.status === 200) {\n                        this.setState({\n                            toggleDownloadBtn: true,\n                            generatedFileName: response.data\n                        });\n                    }\n                });\n            }\n            )\n        }\n\n    }\n\n\n    render() {\n        return (\n            <Form id='form' onSubmit={this.handleSubmit}>\n\n                <Societe styles={styles} title=\"Societé\" />\n                <Client title=\"Client\" styles={styles} />\n\n                <Row style={styles} >\n                    <Col md=\"6\">\n                        <h4>Produit</h4>\n                    </Col>\n                </Row>\n                {this.state.produit.map((field, idx) => {\n                    return (\n                        <div key={`${field}-${idx}`}>\n                            <Produit styles={styles} title=\"Produit\" idx={idx} add={handleAdd.bind(this, 'produit')} delete={handleRemove.bind(this, idx, 'produit')} />\n                        </div>\n\n                    );\n                })}\n                <fieldset className=\"my-fieldset\">\n                    <hr />\n                    <Row>\n                        <Col className=\"form-group\">\n                            <label >Intitulé de la facture</label>\n\n                            <FormInput\n                                type=\"text\"\n                                name=\"description\"\n                                placeholder=\"Description\"\n                            />\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col md=\"5\" className=\"form-group\">\n                            <label >Date de facturation</label>\n\n                            <FormInput\n                                name=\"dateFacturation\"\n                                type=\"date\"\n                            />\n                        </Col>\n\n\n                        <Col md=\"5\" className=\"form-group\">\n                            <label >Date de Paiement</label>\n\n                            <FormInput\n                                name=\"datePaiement\"\n                                type=\"date\"\n                            />\n                        </Col>\n                        <Col md=\"2\" className=\"form-group\">\n\n                            <label htmlFor=\"feSignature\">Signature</label>\n                            <FormSelect name=\"signature\">\n                                <option value=\"true\">Oui</option>\n                                <option value=\"false\">Non</option>\n                            </FormSelect>\n                        </Col>\n                    </Row>\n                </fieldset>\n                <fieldset className=\"my-fieldset\">\n                    <Button outline theme=\"primary\" className=\"mb-2 mr-1\" type=\"submit\">Générer le document</Button>\n                    <Button outline theme=\"secondary\" className=\"mb-2 mr-1\" type=\"reset\">Vider les champs</Button>\n                    {this.state.toggleDownloadBtn ? <a href={downloadURL + this.state.generatedFileName} > <button title=\"Télécharger le fichier PDF généré\" type=\"button\" className=\"mb-2 mr-1 btn btn-outline-success\"><i className=\"fa fa-download\" aria-hidden=\"true\"></i></button></a> : \"\"}\n                </fieldset>\n\n            </ Form>);\n    }\n}\n\nexport default Facture;\n"]},"metadata":{},"sourceType":"module"}