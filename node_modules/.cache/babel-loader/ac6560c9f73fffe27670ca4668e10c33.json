{"ast":null,"code":"import _classCallCheck from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/yassine/Desktop/Gendoc-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/yassine/Desktop/Gendoc-front/src/components/forms/Other.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Col, Form, FormTextarea, Row, Button } from \"shards-react\";\nimport CustomFileUpload from \"../components-overview/CustomFileUpload\";\nimport { downloadFilesURL as downloadURL, gendocServiceURL as apiURL, styles } from '../../constants/defaultValues';\nimport '../../assets/style.css';\n\nvar Other =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Other, _Component);\n\n  function Other(props) {\n    var _this;\n\n    _classCallCheck(this, Other);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Other).call(this, props));\n    _this.state = {\n      toggleDownloadBtn: false,\n      template: null,\n      formData: {\n        \"signed\": false,\n        \"type\": \"\",\n        data: {}\n      }\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Other, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      console.log(e.target);\n      this.setState({\n        formData: {\n          \"signed\": false,\n          \"typeName\": this.props.type,\n          data: {\n            \"json\": e.target.json.value,\n            \"template\": e.target.template.value\n          }\n        }\n      }, function () {\n        console.log(_this2.state.formData);\n        axios.post(apiURL, {\n          responseType: 'arraybuffer',\n          headers: {\n            'Accept': 'application/pdf'\n          }\n        }, {\n          params: {\n            data: _this2.state.formData\n          }\n        }).then(function (response) {\n          if (response.status == 200) {\n            _this2.setState({\n              toggleDownloadBtn: true,\n              generatedFileName: response.data\n            });\n          }\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"fieldset\", {\n        className: \"contact-fieldset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Row, {\n        form: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"8\",\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"JSON\"), React.createElement(FormTextarea, {\n        md: \"8\",\n        name: \"json\",\n        defaultValue: \"{ \\\"signed\\\" : true | false, \\\"type\\\" : \\\"other\\\", \\\"data\\\" : { ... }}\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: \"4\",\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Template\"), React.createElement(CustomFileUpload, {\n        md: \"8\",\n        name: \"template\",\n        id: \"template-file\",\n        extension: \".docx,.doc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        outline: true,\n        theme: \"primary\",\n        className: \"mb-2 mr-1\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"G\\xE9n\\xE9rer le document\"), React.createElement(Button, {\n        outline: true,\n        theme: \"secondary\",\n        className: \"mb-2 mr-1\",\n        type: \"reset\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Vider les champs\"), this.state.toggleDownloadBtn ? React.createElement(\"a\", {\n        href: downloadURL + this.state.generatedFileName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \" \", React.createElement(\"button\", {\n        title: \"T\\xE9l\\xE9charger le fichier PDF g\\xE9n\\xE9r\\xE9\",\n        type: \"button\",\n        className: \"mb-2 mr-1 btn btn-outline-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-download\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }))) : \"\"));\n    }\n  }]);\n\n  return Other;\n}(Component);\n\nexport default Other;","map":{"version":3,"sources":["/home/yassine/Desktop/Gendoc-front/src/components/forms/Other.js"],"names":["React","Component","axios","Col","Form","FormTextarea","Row","Button","CustomFileUpload","downloadFilesURL","downloadURL","gendocServiceURL","apiURL","styles","Other","props","state","toggleDownloadBtn","template","formData","data","handleSubmit","bind","e","preventDefault","console","log","target","setState","type","json","value","post","responseType","headers","params","then","response","status","generatedFileName"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,EAAcC,IAAd,EAAmBC,YAAnB,EAAiCC,GAAjC,EAAsCC,MAAtC,QAAoD,cAApD;AACA,OAAOC,gBAAP,MAA6B,yCAA7B;AACA,SAASC,gBAAgB,IAAIC,WAA7B,EAA0CC,gBAAgB,IAAIC,MAA9D,EAAsEC,MAAtE,QAAoF,+BAApF;AACA,OAAO,wBAAP;;IAEMC,K;;;;;AAUJ,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN;AADiB,UATnBC,KASmB,GATX;AACNC,MAAAA,iBAAiB,EAAE,KADb;AAENC,MAAAA,QAAQ,EAAE,IAFJ;AAGNC,MAAAA,QAAQ,EAAE;AACR,kBAAU,KADF;AAER,gBAAQ,EAFA;AAGRC,QAAAA,IAAI,EAAE;AAHE;AAHJ,KASW;AAEjB,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;AAFiB;AAIlB;;;;iCAEUC,C,EAAE;AAAA;;AACbA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,CAAC,CAACI,MAAd;AAEA,WAAKC,QAAL,CAAc;AACZT,QAAAA,QAAQ,EAAE;AACR,oBAAU,KADF;AAER,sBAAY,KAAKJ,KAAL,CAAWc,IAFf;AAGRT,UAAAA,IAAI,EAAE;AACJ,oBAASG,CAAC,CAACI,MAAF,CAASG,IAAT,CAAcC,KADnB;AAEJ,wBAAYR,CAAC,CAACI,MAAF,CAAST,QAAT,CAAkBa;AAF1B;AAHE;AADE,OAAd,EASG,YAAM;AACPN,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACV,KAAL,CAAWG,QAAvB;AACAjB,QAAAA,KAAK,CAAC8B,IAAN,CAAWpB,MAAX,EAAmB;AACjBqB,UAAAA,YAAY,EAAE,aADG;AAEjBC,UAAAA,OAAO,EAAE;AACP,sBAAU;AADH;AAFQ,SAAnB,EAME;AACEC,UAAAA,MAAM,EAAE;AACNf,YAAAA,IAAI,EAAE,MAAI,CAACJ,KAAL,CAAWG;AADX;AADV,SANF,EAUKiB,IAVL,CAUU,UAACC,QAAD,EAAc;AACpB,cAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,YAAA,MAAI,CAACV,QAAL,CAAc;AACZX,cAAAA,iBAAiB,EAAE,IADP;AAEZsB,cAAAA,iBAAiB,EAAEF,QAAQ,CAACjB;AAFhB,aAAd;AAID;AACF,SAjBH;AAkBD,OA7BD;AAgCD;;;6BACU;AACP,aACA,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAU,QAAA,SAAS,EAAC,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,oBAAC,GAAD;AAAK,QAAA,IAAI,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE,oBAAC,YAAD;AACE,QAAA,EAAE,EAAC,GADL;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,YAAY,EAAC,wEAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,EAeE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,GAArB;AACA,QAAA,IAAI,EAAC,UADL;AACgB,QAAA,EAAE,EAAC,eADnB;AACmC,QAAA,SAAS,EAAC,YAD7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CAfF,CAFF,EAyBE,oBAAC,MAAD;AAAQ,QAAA,OAAO,MAAf;AAAgB,QAAA,KAAK,EAAC,SAAtB;AAAgC,QAAA,SAAS,EAAC,WAA1C;AAAsD,QAAA,IAAI,EAAC,QAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAzBF,EA0BE,oBAAC,MAAD;AAAQ,QAAA,OAAO,MAAf;AAAgB,QAAA,KAAK,EAAC,WAAtB;AAAkC,QAAA,SAAS,EAAC,WAA5C;AAAwD,QAAA,IAAI,EAAC,OAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BA1BF,EA4BG,KAAKL,KAAL,CAAWC,iBAAX,GAA+B;AAAG,QAAA,IAAI,EAAEP,WAAW,GAAG,KAAKM,KAAL,CAAWuB,iBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAuD;AAAQ,QAAA,KAAK,EAAC,kDAAd;AAAkD,QAAA,IAAI,EAAC,QAAvD;AAAgE,QAAA,SAAS,EAAC,mCAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8G;AAAG,QAAA,SAAS,EAAC,gBAAb;AAA8B,uBAAY,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA9G,CAAvD,CAA/B,GAAyQ,EA5B5Q,CADF,CADA;AAoCD;;;;EA1FiBtC,S;;AA4FpB,eAAea,KAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport { Col, Form,FormTextarea, Row, Button } from \"shards-react\";\nimport CustomFileUpload from \"../components-overview/CustomFileUpload\";\nimport { downloadFilesURL as downloadURL, gendocServiceURL as apiURL, styles } from '../../constants/defaultValues'\nimport '../../assets/style.css';\n\nclass Other extends Component {\n  state = {\n    toggleDownloadBtn: false,\n    template: null,\n    formData: {\n      \"signed\": false,\n      \"type\": \"\",\n      data: {}\n    }\n  }\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n  }\n\nhandleSubmit(e){\n  e.preventDefault();\n  console.log(e.target)\n\n  this.setState({\n    formData: {\n      \"signed\": false,\n      \"typeName\": this.props.type,\n      data: {\n        \"json\" : e.target.json.value,\n        \"template\": e.target.template.value\n      }\n    }\n  }, () => {\n    console.log(this.state.formData)\n    axios.post(apiURL, {\n      responseType: 'arraybuffer',\n      headers: {\n        'Accept': 'application/pdf'\n      }\n    },\n      {\n        params: {\n          data: this.state.formData\n        }\n      }).then((response) => {\n        if (response.status == 200) {\n          this.setState({\n            toggleDownloadBtn: true,\n            generatedFileName: response.data\n          });\n        }\n      });\n  }\n  );\n\n}\n  render() {\n    return (\n    <Form onSubmit={this.handleSubmit}>\n      <fieldset className=\"contact-fieldset\">\n\n        <Row form>\n          <Col md=\"8\" className=\"form-group\" >\n            <label >JSON</label>\n            <FormTextarea\n              md=\"8\"\n              name=\"json\"\n              defaultValue='{\n              \"signed\" : true | false,\n              \"type\" : \"other\",\n              \"data\" : {\n              ...\n              }}'\n           />\n          </Col>\n          \n          <Col md=\"4\" className=\"form-group\" >\n            \n            <label >Template</label>\n            <CustomFileUpload md=\"8\" \n            name=\"template\" id=\"template-file\" extension=\".docx,.doc\" />\n\n          </Col>\n        </Row>\n        <Button outline theme=\"primary\" className=\"mb-2 mr-1\" type=\"submit\">Générer le document</Button>\n        <Button outline theme=\"secondary\" className=\"mb-2 mr-1\" type=\"reset\">Vider les champs</Button>\n\n        {this.state.toggleDownloadBtn ? <a href={downloadURL + this.state.generatedFileName} > <button title=\"Télécharger le fichier PDF généré\" type=\"button\" className=\"mb-2 mr-1 btn btn-outline-success\"><i className=\"fa fa-download\" aria-hidden=\"true\"></i></button></a> : \"\"}\n\n       \n      </fieldset>\n    </Form>\n    );\n  }\n}\nexport default Other;\n"]},"metadata":{},"sourceType":"module"}